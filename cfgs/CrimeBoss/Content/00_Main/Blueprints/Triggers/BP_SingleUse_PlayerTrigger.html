<!DOCTYPE html>
<html>
  <head>
    <style>
      window, html, body {
        border: 0;
        margin: 0;
        padding: 0;
      }
      body {
        overflow: scroll;
      }
      #minimap-container {
        position: fixed;
        top: 5vmin;
        right: 5vmin;

        outline: 2px solid black;
      }
      #minimap {
        max-width: 30vmin;
        max-height: 30vmin;

        display: block;

        pointer-events: none;
      }
      #minimap-view {
        position: absolute;
        box-sizing: border-box;
        left: 0%;
        top: 50%;

        pointer-events: none;

        outline: 2px solid black;
      }
      #map {
        transform-origin: top left;
      }
      #container {
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div id="minimap-container">
      <img id="minimap"></img>
      <div id="minimap-view"></div>
    </div>
    <script type="text/javascript">
      const container = document.getElementById('container');
      const minimap = document.getElementById('minimap');
      const minimapView = document.getElementById('minimap-view');
      const minimapContainer = document.getElementById('minimap-container');

      const data = new TextDecoder().decode(Uint8Array.from(atob("PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iDQogImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDkuMC4wICgyMDIzMDkxMS4xODI3KQ0KIC0tPg0KPCEtLSBQYWdlczogMSAtLT4NCjxzdmcgd2lkdGg9IjE0OTFwdCIgaGVpZ2h0PSIxMTY2cHQiDQogdmlld0JveD0iMC4wMCAwLjAwIDE0OTAuNTAgMTE2Ni4yNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQo8ZyBpZD0iZ3JhcGgwIiBjbGFzcz0iZ3JhcGgiIHRyYW5zZm9ybT0ic2NhbGUoMSAxKSByb3RhdGUoMCkgdHJhbnNsYXRlKDQgMTE2Mi4yNSkiPg0KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0xMTYyLjI1IDE0ODYuNSwtMTE2Mi4yNSAxNDg2LjUsNCAtNCw0Ii8+DQo8IS0tIEJQX1NpbmdsZVVzZV9QbGF5ZXJUcmlnZ2VyX0MgLS0+DQo8ZyBpZD0ibm9kZTEiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5CUF9TaW5nbGVVc2VfUGxheWVyVHJpZ2dlcl9DPC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiM4OGZmODgiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMCwtMTA2My4xMiAwLC0xMTE4LjM4IDc5MS41LC0xMTE4LjM4IDc5MS41LC0xMDYzLjEyIDAsLTEwNjMuMTIiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTExMDEuMDgiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkNsYXNzRXhwb3J0OiBCUF9TaW5nbGVVc2VfUGxheWVyVHJpZ2dlcl9DPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4IiB5PSItMTA4NS4zMyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQU3VwZXJTdHJ1Y3Q6IGltcG9ydCAvR2FtZS8wMF9NYWluL0JsdWVwcmludHMvVHJpZ2dlcnMvQlBfUGxheWVyX1RyaWdnZXImIzQ1OyZndDtCUF9QbGF5ZXJfVHJpZ2dlcl9DPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4IiB5PSItMTA2OS41OCIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQUHJvcGVydGllczo8L3RleHQ+DQo8L2c+DQo8IS0tIEN1c3RvbUZpbHRlciAtLT4NCjxnIGlkPSJub2RlMiIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkN1c3RvbUZpbHRlcjwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZmY4ODg4IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjgwOS41LC0xMDIzLjc1IDgwOS41LC0xMTU3Ljc1IDEzMDQsLTExNTcuNzUgMTMwNCwtMTAyMy43NSA4MDkuNSwtMTAyMy43NSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4MTcuNSIgeT0iLTExNDAuNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkZ1bmN0aW9uIEN1c3RvbUZpbHRlcjwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iODE3LjUiIHk9Ii0xMTI0LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkE9iamVjdFByb3BlcnR5IGluT3RoZXJBY3RvcjwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iODE3LjUiIHk9Ii0xMTA4Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJDilJzilJDilJzilJBDUEZfQmx1ZXByaW50VmlzaWJsZXxDUEZfQmx1ZXByaW50UmVhZE9ubHl8Q1BGX1Bhcm08L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjgxNy41IiB5PSItMTA5My4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBCb29sUHJvcGVydHkgUmV0dXJuVmFsdWU8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjgxNy41IiB5PSItMTA3Ny40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQQ1BGX1Bhcm18Q1BGX091dFBhcm18Q1BGX1JldHVyblBhcm08L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjgxNy41IiB5PSItMTA2MS43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBPYmplY3RQcm9wZXJ0eSBLMk5vZGVfRHluYW1pY0Nhc3RfQXNJR1NfUGxheWVyX0NoYXJhY3RlcjwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iODE3LjUiIHk9Ii0xMDQ1Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBCb29sUHJvcGVydHkgSzJOb2RlX0R5bmFtaWNDYXN0X2JTdWNjZXNzPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4MTcuNSIgeT0iLTEwMzAuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQQm9vbFByb3BlcnR5IENhbGxGdW5jX0lzUGxheWVyQ29udHJvbGxlZF9SZXR1cm5WYWx1ZTwvdGV4dD4NCjwvZz4NCjwhLS0gQ3VzdG9tRmlsdGVyX18wIC0tPg0KPGcgaWQ9Im5vZGUzIiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyX18wPC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzY0LjEyLC04NDMuNSA3NjQuMTIsLTkzOC4yNSAxMzQ5LjM4LC05MzguMjUgMTM0OS4zOCwtODQzLjUgNzY0LjEyLC04NDMuNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTA1Ni43NSIgeT0iLTkyMC45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+QlBfU2luZ2xlVXNlX1BsYXllclRyaWdnZXJfQzo6Q3VzdG9tRmlsdGVyOjA8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI3NjQuMTIsLTkxNC41IDEzNDkuMzgsLTkxNC41Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9Ijc3Mi4xMiIgeT0iLTg5Ny4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9MZXQ8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9Ijc3Mi4xMiIgeT0iLTg4MS40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfTG9jYWxWYXJpYWJsZSBbSzJOb2RlX0R5bmFtaWNDYXN0X0FzSUdTX1BsYXllcl9DaGFyYWN0ZXJdPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI3NzIuMTIiIHk9Ii04NjUuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfRHluYW1pY0Nhc3QgaW1wb3J0IC9TY3JpcHQvQkZfRnJhbWV3b3JrR2FtZSYjNDU7Jmd0O0lHU19QbGF5ZXJDaGFyYWN0ZXI8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9Ijc3Mi4xMiIgeT0iLTg0OS45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQRVhfTG9jYWxWYXJpYWJsZSBbaW5PdGhlckFjdG9yXTwvdGV4dD4NCjwvZz4NCjwhLS0gQ3VzdG9tRmlsdGVyJiM0NTsmZ3Q7Q3VzdG9tRmlsdGVyX18wIC0tPg0KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyJiM0NTsmZ3Q7Q3VzdG9tRmlsdGVyX18wPC90aXRsZT4NCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xMDU2Ljc1LC0xMDIzLjMxQzEwNTYuNzUsLTk5OS40OSAxMDU2Ljc1LC05NzIuODQgMTA1Ni43NSwtOTQ5LjgiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwNjAuMjUsLTk0OS45OCAxMDU2Ljc1LC05MzkuOTggMTA1My4yNSwtOTQ5Ljk4IDEwNjAuMjUsLTk0OS45OCIvPg0KPC9nPg0KPCEtLSBDdXN0b21GaWx0ZXJfXzM2IC0tPg0KPGcgaWQ9Im5vZGU0IiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyX18zNjwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc4NC43NSwtNzEwLjc1IDc4NC43NSwtODA1LjUgMTMyOC43NSwtODA1LjUgMTMyOC43NSwtNzEwLjc1IDc4NC43NSwtNzEwLjc1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMDU2Ljc1IiB5PSItNzg4LjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkJQX1NpbmdsZVVzZV9QbGF5ZXJUcmlnZ2VyX0M6OkN1c3RvbUZpbHRlcjozNjwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc4NC43NSwtNzgxLjc1IDEzMjguNzUsLTc4MS43NSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI3OTIuNzUiIHk9Ii03NjQuNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX0xldDwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNzkyLjc1IiB5PSItNzQ4LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0xvY2FsVmFyaWFibGUgW0syTm9kZV9EeW5hbWljQ2FzdF9iU3VjY2Vzc108L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9Ijc5Mi43NSIgeT0iLTczMi45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfUHJpbWl0aXZlQ2FzdCBPYmplY3RUb0Jvb2w8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9Ijc5Mi43NSIgeT0iLTcxNy4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJDilJzilJDilJzilJBFWF9Mb2NhbFZhcmlhYmxlIFtLMk5vZGVfRHluYW1pY0Nhc3RfQXNJR1NfUGxheWVyX0NoYXJhY3Rlcl08L3RleHQ+DQo8L2c+DQo8IS0tIEN1c3RvbUZpbHRlcl9fMCYjNDU7Jmd0O0N1c3RvbUZpbHRlcl9fMzYgLS0+DQo8ZyBpZD0iZWRnZTIiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5DdXN0b21GaWx0ZXJfXzAmIzQ1OyZndDtDdXN0b21GaWx0ZXJfXzM2PC90aXRsZT4NCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xMDU2Ljc1LC04NDMuMDRDMTA1Ni43NSwtODM0LjU4IDEwNTYuNzUsLTgyNS42NyAxMDU2Ljc1LC04MTYuOTUiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwNjAuMjUsLTgxNy4xNSAxMDU2Ljc1LC04MDcuMTUgMTA1My4yNSwtODE3LjE1IDEwNjAuMjUsLTgxNy4xNSIvPg0KPC9nPg0KPCEtLSBDdXN0b21GaWx0ZXJfXzY1IC0tPg0KPGcgaWQ9Im5vZGU1IiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyX182NTwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijg1MC43NSwtNjA5LjUgODUwLjc1LC02NzIuNzUgMTI2Mi43NSwtNjcyLjc1IDEyNjIuNzUsLTYwOS41IDg1MC43NSwtNjA5LjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEwNTYuNzUiIHk9Ii02NTUuNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkJQX1NpbmdsZVVzZV9QbGF5ZXJUcmlnZ2VyX0M6OkN1c3RvbUZpbHRlcjo2NTwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijg1MC43NSwtNjQ5IDEyNjIuNzUsLTY0OSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4NTguNzUiIHk9Ii02MzEuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfSnVtcElmTm90IDE0OTwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iODU4Ljc1IiB5PSItNjE1Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbFZhcmlhYmxlIFtLMk5vZGVfRHluYW1pY0Nhc3RfYlN1Y2Nlc3NdPC90ZXh0Pg0KPC9nPg0KPCEtLSBDdXN0b21GaWx0ZXJfXzM2JiM0NTsmZ3Q7Q3VzdG9tRmlsdGVyX182NSAtLT4NCjxnIGlkPSJlZGdlMyIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPkN1c3RvbUZpbHRlcl9fMzYmIzQ1OyZndDtDdXN0b21GaWx0ZXJfXzY1PC90aXRsZT4NCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xMDU2Ljc1LC03MTAuMzVDMTA1Ni43NSwtNzAxLjgxIDEwNTYuNzUsLTY5Mi45NSAxMDU2Ljc1LC02ODQuNTUiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwNjAuMjUsLTY4NC41NyAxMDU2Ljc1LC02NzQuNTcgMTA1My4yNSwtNjg0LjU3IDEwNjAuMjUsLTY4NC41NyIvPg0KPC9nPg0KPCEtLSBDdXN0b21GaWx0ZXJfXzc5IC0tPg0KPGcgaWQ9Im5vZGU2IiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyX183OTwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjcxMy43NSwtNDMwLjUgNzEzLjc1LC01NTYuNzUgMTI1Ny43NSwtNTU2Ljc1IDEyNTcuNzUsLTQzMC41IDcxMy43NSwtNDMwLjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9Ijk4NS43NSIgeT0iLTUzOS40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+QlBfU2luZ2xlVXNlX1BsYXllclRyaWdnZXJfQzo6Q3VzdG9tRmlsdGVyOjc5PC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzEzLjc1LC01MzMgMTI1Ny43NSwtNTMzIi8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjcyMS43NSIgeT0iLTUxNS43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9MZXRCb29sPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI3MjEuNzUiIHk9Ii00OTkuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0xvY2FsVmFyaWFibGUgW0NhbGxGdW5jX0lzUGxheWVyQ29udHJvbGxlZF9SZXR1cm5WYWx1ZV08L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjcyMS43NSIgeT0iLTQ4NC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Db250ZXh0PC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI3MjEuNzUiIHk9Ii00NjguNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkEVYX0xvY2FsVmFyaWFibGUgW0syTm9kZV9EeW5hbWljQ2FzdF9Bc0lHU19QbGF5ZXJfQ2hhcmFjdGVyXTwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNzIxLjc1IiB5PSItNDUyLjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkEVYX1ZpcnR1YWxGdW5jdGlvbiBJc1BsYXllckNvbnRyb2xsZWQ8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjcyMS43NSIgeT0iLTQzNi45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQUlZhbHVlID0gW0NhbGxGdW5jX0lzUGxheWVyQ29udHJvbGxlZF9SZXR1cm5WYWx1ZV08L3RleHQ+DQo8L2c+DQo8IS0tIEN1c3RvbUZpbHRlcl9fNjUmIzQ1OyZndDtDdXN0b21GaWx0ZXJfXzc5IC0tPg0KPGcgaWQ9ImVkZ2U1IiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyX182NSYjNDU7Jmd0O0N1c3RvbUZpbHRlcl9fNzk8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTEwNDEuNjksLTYwOS4yN0MxMDM1LjY3LC01OTYuOTMgMTAyOC40NiwtNTgyLjE2IDEwMjEuMjYsLTU2Ny4zOSIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTAyNC40NywtNTY2IDEwMTYuOTQsLTU1OC41NSAxMDE4LjE4LC01NjkuMDcgMTAyNC40NywtNTY2Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMDQxIiB5PSItNTc3LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPklGPC90ZXh0Pg0KPC9nPg0KPCEtLSBDdXN0b21GaWx0ZXJfXzE0OSAtLT4NCjxnIGlkPSJub2RlOSIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkN1c3RvbUZpbHRlcl9fMTQ5PC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTA4NywtMzE2Ljc1IDEwODcsLTQxMS41IDE0ODIuNSwtNDExLjUgMTQ4Mi41LC0zMTYuNzUgMTA4NywtMzE2Ljc1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMjg0Ljc1IiB5PSItMzk0LjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkJQX1NpbmdsZVVzZV9QbGF5ZXJUcmlnZ2VyX0M6OkN1c3RvbUZpbHRlcjoxNDk8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMDg3LC0zODcuNzUgMTQ4Mi41LC0zODcuNzUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTA5NSIgeT0iLTM3MC40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfTGV0Qm9vbDwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTA5NSIgeT0iLTM1NC43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbE91dFZhcmlhYmxlPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMDk1IiB5PSItMzM4Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJDilJzilJDilJzilJBbUmV0dXJuVmFsdWVdPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMDk1IiB5PSItMzIzLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0ZhbHNlPC90ZXh0Pg0KPC9nPg0KPCEtLSBDdXN0b21GaWx0ZXJfXzY1JiM0NTsmZ3Q7Q3VzdG9tRmlsdGVyX18xNDkgLS0+DQo8ZyBpZD0iZWRnZTQiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5DdXN0b21GaWx0ZXJfXzY1OmUmIzQ1OyZndDtDdXN0b21GaWx0ZXJfXzE0OTwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9InJlZCIgZD0iTTEyNjMuNzUsLTY0MS4xMkMxMzUwLjQ5LC02NDEuMTIgMTMyNS4zNSwtNTAzLjkgMTMwMi45OCwtNDIyLjk3Ii8+DQo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9InJlZCIgcG9pbnRzPSIxMzA2LjM2LC00MjIuMDcgMTMwMC4yNiwtNDEzLjQgMTI5OS42MiwtNDIzLjk4IDEzMDYuMzYsLTQyMi4wNyIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTM0Ny41IiB5PSItNTc3LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPklGIE5PVDwvdGV4dD4NCjwvZz4NCjwhLS0gQ3VzdG9tRmlsdGVyX18xMjUgLS0+DQo8ZyBpZD0ibm9kZTciIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5DdXN0b21GaWx0ZXJfXzEyNTwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc0Mi4yNSwtMjAzIDc0Mi4yNSwtMjk3Ljc1IDEyNTMuMjUsLTI5Ny43NSAxMjUzLjI1LC0yMDMgNzQyLjI1LC0yMDMiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9Ijk5Ny43NSIgeT0iLTI4MC40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+QlBfU2luZ2xlVXNlX1BsYXllclRyaWdnZXJfQzo6Q3VzdG9tRmlsdGVyOjEyNTwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc0Mi4yNSwtMjc0IDEyNTMuMjUsLTI3NCIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI3NTAuMjUiIHk9Ii0yNTYuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfTGV0Qm9vbDwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNzUwLjI1IiB5PSItMjQwLjk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbE91dFZhcmlhYmxlPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI3NTAuMjUiIHk9Ii0yMjUuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQW1JldHVyblZhbHVlXTwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNzUwLjI1IiB5PSItMjA5LjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbFZhcmlhYmxlIFtDYWxsRnVuY19Jc1BsYXllckNvbnRyb2xsZWRfUmV0dXJuVmFsdWVdPC90ZXh0Pg0KPC9nPg0KPCEtLSBDdXN0b21GaWx0ZXJfXzc5JiM0NTsmZ3Q7Q3VzdG9tRmlsdGVyX18xMjUgLS0+DQo8ZyBpZD0iZWRnZTYiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5DdXN0b21GaWx0ZXJfXzc5JiM0NTsmZ3Q7Q3VzdG9tRmlsdGVyX18xMjU8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTk4OC44NiwtNDMwLjE4Qzk5MC43MSwtMzkyLjg5IDk5My4wNSwtMzQ1Ljg1IDk5NC44NiwtMzA5LjM4Ii8+DQo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI5OTguMzYsLTMwOS42IDk5NS4zNiwtMjk5LjQ0IDk5MS4zNywtMzA5LjI2IDk5OC4zNiwtMzA5LjYiLz4NCjwvZz4NCjwhLS0gQ3VzdG9tRmlsdGVyX18xNDQgLS0+DQo8ZyBpZD0ibm9kZTgiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5DdXN0b21GaWx0ZXJfXzE0NDwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijg0NSwtMTE3LjUgODQ1LC0xNjUgMTI0MC41LC0xNjUgMTI0MC41LC0xMTcuNSA4NDUsLTExNy41Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMDQyLjc1IiB5PSItMTQ3LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkJQX1NpbmdsZVVzZV9QbGF5ZXJUcmlnZ2VyX0M6OkN1c3RvbUZpbHRlcjoxNDQ8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI4NDUsLTE0MS4yNSAxMjQwLjUsLTE0MS4yNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4NTMiIHk9Ii0xMjMuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX0p1bXAgMTYwPC90ZXh0Pg0KPC9nPg0KPCEtLSBDdXN0b21GaWx0ZXJfXzEyNSYjNDU7Jmd0O0N1c3RvbUZpbHRlcl9fMTQ0IC0tPg0KPGcgaWQ9ImVkZ2U3IiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyX18xMjUmIzQ1OyZndDtDdXN0b21GaWx0ZXJfXzE0NDwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTAxNy4zNiwtMjAyLjdDMTAyMS4xOSwtMTkzLjU4IDEwMjUuMTMsLTE4NC4xOSAxMDI4LjczLC0xNzUuNjEiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwMzEuODUsLTE3Ny4yMyAxMDMyLjUsLTE2Ni42NiAxMDI1LjQsLTE3NC41MiAxMDMxLjg1LC0xNzcuMjMiLz4NCjwvZz4NCjwhLS0gQ3VzdG9tRmlsdGVyX18xNjAgLS0+DQo8ZyBpZD0ibm9kZTEwIiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyX18xNjA8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI5NjUsLTAuNSA5NjUsLTc5LjUgMTM2MC41LC03OS41IDEzNjAuNSwtMC41IDk2NSwtMC41Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMTYyLjc1IiB5PSItNjIuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+QlBfU2luZ2xlVXNlX1BsYXllclRyaWdnZXJfQzo6Q3VzdG9tRmlsdGVyOjE2MDwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijk2NSwtNTUuNzUgMTM2MC41LC01NS43NSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI5NzMiIHk9Ii0zOC40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfUmV0dXJuPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI5NzMiIHk9Ii0yMi43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbE91dFZhcmlhYmxlPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI5NzMiIHk9Ii02Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJDilJzilJDilJzilJBbUmV0dXJuVmFsdWVdPC90ZXh0Pg0KPC9nPg0KPCEtLSBDdXN0b21GaWx0ZXJfXzE0NCYjNDU7Jmd0O0N1c3RvbUZpbHRlcl9fMTYwIC0tPg0KPGcgaWQ9ImVkZ2U4IiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyX18xNDQmIzQ1OyZndDtDdXN0b21GaWx0ZXJfXzE2MDwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTA3MC41OCwtMTE3LjIzQzEwODEuNSwtMTA4LjIgMTA5NC40MiwtOTcuNTEgMTEwNy4wOSwtODcuMDMiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjExMDkuMTUsLTg5Ljg3IDExMTQuNjMsLTgwLjggMTEwNC42OSwtODQuNDggMTEwOS4xNSwtODkuODciLz4NCjwvZz4NCjwhLS0gQ3VzdG9tRmlsdGVyX18xNDkmIzQ1OyZndDtDdXN0b21GaWx0ZXJfXzE2MCAtLT4NCjxnIGlkPSJlZGdlOSIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPkN1c3RvbUZpbHRlcl9fMTQ5JiM0NTsmZ3Q7Q3VzdG9tRmlsdGVyX18xNjA8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTEyODcuNDgsLTMxNi42QzEyODguNDksLTI2NC43NyAxMjgzLjkxLC0xNzkuOTggMTI0OS43NSwtMTE3IDEyNDMuOTcsLTEwNi4zNCAxMjM2LjA2LC05Ni40NyAxMjI3LjM1LC04Ny42MiIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTIyOS45MSwtODUuMjIgMTIyMC4yNywtODAuODMgMTIyNS4wNywtOTAuMjcgMTIyOS45MSwtODUuMjIiLz4NCjwvZz4NCjwhLS0gQ3VzdG9tRmlsdGVyX18xNzAgLS0+DQo8ZyBpZD0ibm9kZTExIiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+Q3VzdG9tRmlsdGVyX18xNzA8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMDcyLC05NTcuMjUgMTA3MiwtMTAwNC43NSAxNDY3LjUsLTEwMDQuNzUgMTQ2Ny41LC05NTcuMjUgMTA3MiwtOTU3LjI1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMjY5Ljc1IiB5PSItOTg3LjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5CUF9TaW5nbGVVc2VfUGxheWVyVHJpZ2dlcl9DOjpDdXN0b21GaWx0ZXI6MTcwPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTA3MiwtOTgxIDE0NjcuNSwtOTgxIi8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjEwODAiIHk9Ii05NjMuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfRW5kT2ZTY3JpcHQ8L3RleHQ+DQo8L2c+DQo8L2c+DQo8L3N2Zz4NCg=="), m => m.codePointAt(0)));
      container.innerHTML = data.substring(data.indexOf("<svg"));
      const map = container.children[0];
      minimap.src = URL.createObjectURL(new Blob([data], {'type':'image/svg+xml'}));

      function setScale(s) {
        map.style.scale = s;
        map.style.transformOrigin = '0 0';
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';
        update();
      }

      function zoom(amount, pointX, pointY) {
        const currentScale = +map.style.scale;
        const newScale = currentScale * amount;

        const currentScrollX = window.scrollX;
        const currentScrollY = window.scrollY;

        map.style.scale = newScale;
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';

        window.scrollTo(pointX * amount - (pointX - currentScrollX), pointY * amount - (pointY - currentScrollY));
        update();
      }
      function scroll(dx, dy) {
        window.scrollBy(dx, dy);
        update();
      }
      function handleMove(e) {
        if (!drag) return;
        if (drag === minimapContainer) {
          const bounds = minimap.getBoundingClientRect();

          scroll(
            document.documentElement.scrollWidth * e.movementX / bounds.width,
            document.documentElement.scrollHeight * e.movementY / bounds.height
          );
        } else {
          scroll(-e.movementX, -e.movementY);
        }
        e.preventDefault();
      }

      let debounceTimeout = null;
      function update() {
        minimapView.style.top = document.documentElement.scrollTop / document.documentElement.scrollHeight * 100 + '%';
        minimapView.style.left = document.documentElement.scrollLeft / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.width = document.documentElement.clientWidth / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.height = document.documentElement.clientHeight / document.documentElement.scrollHeight * 100 + '%';
      }

      let drag = false;

      function init() {
        setScale(1);
        const bounds = map.getBoundingClientRect();
        const scaleW = document.documentElement.clientWidth / bounds.width;
        const scaleH = document.documentElement.clientHeight / bounds.height;
        const maxAspectRatio = 0.2;
        const scale = Math.min(Math.max(maxAspectRatio, scaleW / scaleH) * scaleH, Math.max(maxAspectRatio, scaleH / scaleW) * scaleW);
        setScale(Math.min(scale, 1));
      }

      window.addEventListener('wheel', e => {
        e.preventDefault();
        zoom(e.deltaY > 0 ? (1 / 1.1) : 1.1, e.pageX, e.pageY);
      }, {passive: false});

      window.addEventListener('mousedown', e => {
        if (e.target && e.target.tagName === 'text') return;
        if (!(e.buttons & 1)) return;
        if (drag) return;
        drag = e.target || true;
      }, {passive: true});

      window.addEventListener('mouseup', e => {
        if (e.buttons & 1) return;
        drag = false;
      }, {passive: true});

      window.addEventListener('mousemove', e => {
        handleMove(e);
      }, {passive: false});

      window.addEventListener('scroll', () => {
        update();
      }, {passive: true});

      minimapContainer.addEventListener('mousedown', e => {
        e.preventDefault();
      }, {passive: false});

      window.addEventListener('hashchange', () => {
        load();
      }, {passive: true});

      init();
    </script>
  </body>
</html>

